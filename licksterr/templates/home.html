{% extends "base.html" %}
{% block title %}Home{% endblock %}
{% block scripts %}
    {{ super() }}
    <script>
        addEventListener("DOMContentLoaded", function () {
            addUploadListener();
            addRemoveListener();
        }, true);
    </script>
{% endblock %}
{% block content %}
    <h1>Upload file</h1>
    <div id="uploadDiv">
        <input type="file" name="file" id="uploadFile"/>
        <button type="button" id="uploadBtn">Upload</button>
        <span id="uploadPlaceholder"></span>
    </div>
    <div id="trackSelect"></div>
    <h1>Analyzed songs</h1>
    <ul class="decimal">
        {% for song, d in songs.items() %}
            <li>{{ song|e }}
                <button value="{{ song.id }}" class="remove-song-button">Remove song</button>
                <ul class="circle">
                    {% for track in d["tracks"] %}
                        <li><a href="/reader?track={{ track }}">track #{{ loop.index }}</a></li>
                    {% endfor %}
                </ul>
            </li>
        {% endfor %}
    </ul>
{% endblock %}